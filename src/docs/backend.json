
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the Ndara Afrique application.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier for the user (Firebase Auth ID). This is the primary key.",
          "format": "uuid"
        },
        "username": {
            "type": "string",
            "description": "Unique, public-facing username for the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user (private).",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user (private)."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user (private)."
        },
        "profilePictureURL": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "bio": {
            "type": "string",
            "description": "A short biography for the user, especially for instructors."
        },
        "socialLinks": {
            "type": "object",
            "description": "URLs to the user's social media profiles.",
            "properties": {
                "website": { "type": "string", "format": "uri" },
                "twitter": { "type": "string", "format": "uri" },
                "linkedin": { "type": "string", "format": "uri" },
                "youtube": { "type": "string", "format": "uri" }
            }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        },
        "role": {
          "type": "string",
          "description": "Role of the user (student, instructor, or admin).",
          "enum": ["student", "instructor", "admin"]
        },
        "isInstructorApproved": {
          "type": "boolean",
          "description": "Indicates whether the instructor's account has been approved by an admin."
        },
        "careerGoals": {
            "type": "object",
            "description": "User's career goals and interests. The `interestDomain` is used for chat matchmaking.",
            "properties": {
                "currentRole": { "type": "string" },
                "interestDomain": { "type": "string", "description": "Used to match students with others in the same field of study." },
                "mainGoal": { "type": "string" }
            }
        },
        "isProfileComplete": {
            "type": "boolean",
            "description": "Flag indicating if the user has completed the essential parts of their profile (e.g., username, career goals)."
        }
      },
      "required": [
        "uid",
        "email",
        "username",
        "createdAt",
        "role",
        "isInstructorApproved"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course offered on the Ndara Afrique platform.",
      "properties": {
        "courseId": { "type": "string" },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "instructorId": { "type": "string" },
        "category": { "type": "string" },
        "price": { "type": "number" },
        "status": { "type": "string", "enum": ["Draft", "Published", "Pending Review"] }
      },
      "required": ["courseId", "title", "description", "instructorId", "category", "price", "status"]
    },
    "Chat": {
      "title": "Chat",
      "type": "object",
      "description": "Represents a conversation between two users.",
      "properties": {
        "participants": {
          "type": "array",
          "description": "An array containing the UIDs of the two users in the chat.",
          "items": { "type": "string" }
        },
        "participantCategories": {
            "type": "array",
            "description": "An array containing the `interestDomain` of both participants. Used for security rules.",
            "items": { "type": "string" }
        },
        "lastMessage": { "type": "string" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["participants", "participantCategories", "updatedAt"]
    },
    "Message": {
      "title": "Message",
      "type": "object",
      "description": "Represents a single message within a chat.",
      "properties": {
        "senderId": { "type": "string" },
        "text": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["senderId", "text", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profiles."
    },
    "/chats/{chatId}": {
      "schema": { "$ref": "#/entities/Chat" },
      "description": "Stores metadata for each conversation."
    },
    "/chats/{chatId}/messages/{messageId}": {
      "schema": { "$ref": "#/entities/Message" },
      "description": "Stores all messages for a specific conversation."
    },
    "/courses/{courseId}": {
      "schema": { "$ref": "#/entities/Course" },
      "description": "Stores course information."
    }
  }
}
